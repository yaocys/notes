## 操作系统

### 进程和线程

* 进程是系统中资源分配的基本单位，有独立的地址空间，是对正在运行中的程序的一个抽象

* 线程可看作轻量级进程，是调度和分派的基本单位

* 线程存在于进程中，一个进程中可以包含多个线程，

  同一进程下的多个线程共享内存等资源和地址空间，

  线程间通信也更为方便

* 进程和线程都可以并发执行

* 创建、撤销、切换进程的系统开销大于线程

* 一般情况下进程的操纵者是操作系统，线程的操纵者是编程人员

> 并不是线程越多，进程效率越高
>
> 因为一个进程内不管创建了多少线程，都会被限制在一颗CPU/核内，多线程编程微观上仍然是分时串行执行

1. ***进程切换为什么比线程更消耗资源？***

   进程切换需要刷新TLB并获取新的地址空间，然后切换硬件上下文和内核栈

   > TLB：转译后备缓冲器

   线程切换时只需要切换硬件上下文和内核栈

### 进程间通信

   进程间通信主要有以下几种方式：

   * 匿名管道

     一种半双工的通信方式，数据只能单向流动，而且只能在具有亲缘关系（通常指父子）的进程间使用

   * 命名管道

     不同于匿名管道之处在于它提供了一个**路径名**与之关联，以有名管道的文件形式存在于文件系统中

     这样即使与有名管道的创建进程不存在群员关系的进程，只要可以访问该路径，就能够彼此通过有名管道相互通信

     **严格遵循先进先出**

     > 对匿名管道和有名管道的读总是从开始处返回数据，对它们的写则把数据添加到末尾

     **有名管道的名字存在于文件系统中，内容存放在内存中**

   * 信号

     信号是Linux系统中用于进程间互相通信或者操作的一种机制，信号可以在任何时候发给某一进程，而无需知道该进程的状态

     如果该进程当前并未处于执行状态，则该信号就由内核保存起来，直到该进程恢复执行并传递给它为止

     如果一个信号被进程设置为阻塞，则该信号的传递被延迟，直到其阻塞被取消时才被传递给进程

   * 消息队列

   * 共享内存

   * 信号量

   * Socket

   

   