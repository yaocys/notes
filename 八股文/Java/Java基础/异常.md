# 异常

## 分类

### 异常类接口

Throwable是异常类的顶层父类，代表所有的非正常情况，直接子类有两个，Error和Exception

* Error错误

  一般指与虚拟机相关的问题，这种问题无法恢复或不可能捕获，将导致应用程序中断

* Exception异常

  分为Checked异常和Runtime异常。

所有RuntimeException类及其子类的实例被称为Runtime异常，其余异常示例则被称为Checked异常

> Java认为Checked异常都是可以被处理（修复）的异常，所以Java程序必须显式处理Checked异常。否则，该程序在编译时就会发生错误，无法通过编译。
>
> Runtime异常则更加灵活，Runtime异常无须显式声明抛出，如果程序需要捕获Runtime异常，也可以使用try...catch块来实现。

## 异常处理

### 处理异常

可以按照如下三个步骤处理异常：

1. 捕获：try…catch…
2. 处理异常：先记录日志
3. 回收资源：将关闭资源代码写在finally块中（无论是否发生异常，总会被执行）

### Java异常机制

* 异常处理：Java中异常处理语句由try（包裹业务代码）、catch（捕获并处理某个类型的异常）、finally（用于回收资源）三部分组成。

* 抛出异常：当程序出现错误时，系统会自动抛出异常。此外，也允许程序主动抛出异常（throw关键字）。throw将异常交给JVM处理

* 异常跟踪栈：程序运行时，经常会发生一系列方法调用，从而形成方法调用栈。异常机制会导致异常在这些方法之间传播，而异常传播顺序与方法的调用相反——从发生异常的方法向外传播，首先传给该方法的调用者，再传给上层调用者，以此类推。

  最终会传到main方法，若依然没有得到处理，则JVM会终止程序，并打印异常跟踪栈的信息

### throw和throws

1. 使用位置不同

   * `throw`用于方法体内部，可以作为单独语句使用
   * `throws`位于方法头部的参数列表后面，不能单独使用

2. 内容不同

   * `throw`抛出一个具体的异常对象，而且只能是一个
   * `throws`声明抛出的异常类，可以同时声明多个

3. 作用不同

   * `throw`用于在程序中抛出异常，一旦执行则一定有异常抛出
   * `throws`声明该方法可能抛出的异常类，如果抛出了异常则由该方法的调用者处理，层层上抛

   > 最终会抛给JVM